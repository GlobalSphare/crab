"use strict";(self.webpackChunkisland_install_front=self.webpackChunkisland_install_front||[]).push([[923],{5923:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var n=t(8390),l=t(7294),c=t(4494),i=t(282),s=t(9669),r=t.n(s),o=t(3411),p=t(5347);const m=(0,c.$j)((function(e){return e}))((function(e){var a=(0,l.useState)("apiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: nginx-deployment\n    labels:\n        app: nginx\nspec:\n    replicas: 3\n    selector:\n        matchLabels:\n            app: nginx\n    template:\n        metadata:\n            labels:\n                app: nginx\n    spec:\n        containers:\n          - name: nginx\n            image: nginx:1.14.2\n            ports:\n                - containerPort: 80"),t=(0,n.Z)(a,2),c=t[0],s=t[1],m=(0,l.useState)("apiVersion: aam.globalsphare.com/v1alpha1\nkind: WorkloadVendor\nmetadata:\n    name: example"),d=(0,n.Z)(m,2),u=d[0],v=d[1],h=(0,l.useState)(""),y=(0,n.Z)(h,2),f=y[0],E=y[1],Z=(0,l.useState)(""),g=(0,n.Z)(Z,2),N=g[0],S=g[1];return(0,l.useEffect)((function(){r()({method:"GET",url:"/api/online/systemspec"}).then((function(e){0==e.data.code?E(e.data.result||""):o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})}))}),[]),l.createElement("section",{className:"page-container online-container"},l.createElement("div",{className:"page-title"},"创建WorkloadVendor"),l.createElement("section",{className:"vendor-content"},l.createElement("div",{className:"vendor-left"},l.createElement("div",{className:"online-title"},l.createElement("p",null,"yaml")),l.createElement("div",{className:"yaml-textarea"},l.createElement("textarea",{className:"textarea-input",value:c,onChange:function(e){s(e.target.value)}})),l.createElement("div",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){""!==c.trim()?(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/translateyaml",data:{value:c},headers:{"Content-Type":"application/json"}}).then((function(e){0==e.data.code?(S(e.data.result||""),o.Z.dispatch({type:p.Sn,val:"转换完成"})):o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})}))):o.Z.dispatch({type:p.Sn,val:"请填写yaml"})}},"转换yaml为cue"))),l.createElement("div",{className:"vendor-right"},l.createElement("div",{className:"online-title"},l.createElement("p",null,"metadata:")),l.createElement("div",{className:"vendor-textarea"},l.createElement("textarea",{className:"textarea-input",value:u,onChange:function(e){v(e.target.value)}})),l.createElement("div",{className:"online-title"},l.createElement("p",null,"system spec:")),l.createElement("div",{className:"vendor-textarea"},l.createElement("textarea",{className:"textarea-input",value:f,onChange:function(e){E(e.target.value)}})),l.createElement("div",{className:"online-title"},l.createElement("p",null,"translate spec:")),l.createElement("p",null,"cue template"),l.createElement("div",{className:"vendor-textarea vendor-preview"},l.createElement("textarea",{className:"textarea-input",value:N,onChange:function(e){S(e.target.value)}})),l.createElement("div",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){""!==N.trim()?(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/checkcue",data:{value:N},headers:{"Content-Type":"application/json"}}).then((function(e){o.Z.dispatch({type:p.Sn,val:0===e.data.code?"检查正确":e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})}))):o.Z.dispatch({type:p.Sn,val:"cue 不能为空"})}},"检查")))),l.createElement("section",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){var e;(""===u.trim()?(o.Z.dispatch({type:p.Sn,val:"metadata 不能为空"}),0):""===f.trim()?(o.Z.dispatch({type:p.Sn,val:"system spec 不能为空"}),0):""!==N.trim()||(o.Z.dispatch({type:p.Sn,val:"translate spec cue 不能为空"}),0))&&(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/createvendor",data:{value:(e=/\n/g,u+"\nspec: | \n    "+f.replace(e,"\n    ")+"\n    "+N.replace(e,"\n        "))},headers:{"Content-Type":"application/json"}}).then((function(e){o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})})))}},"保存")))}))}}]);