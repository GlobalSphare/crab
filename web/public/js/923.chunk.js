"use strict";(self.webpackChunkisland_install_front=self.webpackChunkisland_install_front||[]).push([[923],{5923:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var n=t(8390),l=t(7294),c=t(4494),i=t(282),s=t(9669),r=t.n(s),o=t(3411),p=t(5347);const m=(0,c.$j)((function(e){return e}))((function(e){var a=(0,l.useRef)(null),t=(0,l.useState)("apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx:1.14.2\n          ports:\n            - containerPort: 80"),c=(0,n.Z)(t,2),s=c[0],m=c[1],d=(0,l.useState)("apiVersion: aam.globalsphare.com/v1alpha1\nkind: WorkloadVendor\nmetadata:\n  name: example"),u=(0,n.Z)(d,2),v=u[0],h=u[1],y=(0,l.useState)(""),f=(0,n.Z)(y,2),E=f[0],Z=f[1],N=(0,l.useState)(""),g=(0,n.Z)(N,2),S=g[0],b=g[1];return(0,l.useEffect)((function(){r()({method:"GET",url:"/api/online/systemspec"}).then((function(e){0==e.data.code?Z(e.data.result||""):o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})}))}),[]),l.createElement("section",{className:"page-container online-container"},l.createElement("div",{className:"page-title"},"创建WorkloadVendor"),l.createElement("section",{className:"vendor-content"},l.createElement("div",{className:"vendor-left"},l.createElement("div",{className:"online-title"},l.createElement("p",null,"yaml")),l.createElement("div",{className:"yaml-textarea"},l.createElement("textarea",{className:"textarea-input",value:s,onChange:function(e){m(e.target.value)}})),l.createElement("div",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){""!==s.trim()?(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/translateyaml",data:{value:s},headers:{"Content-Type":"application/json"}}).then((function(e){0==e.data.code?(b(e.data.result||""),a.current.innerText=e.data.result||"",o.Z.dispatch({type:p.Sn,val:"转换完成"})):o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})}))):o.Z.dispatch({type:p.Sn,val:"请填写yaml"})}},"转换yaml为cue"))),l.createElement("div",{className:"vendor-right"},l.createElement("div",{className:"online-title"},l.createElement("p",null,"metadata:")),l.createElement("div",{className:"vendor-textarea"},l.createElement("textarea",{className:"textarea-input",value:v,onChange:function(e){h(e.target.value)}})),l.createElement("div",{className:"online-title"},l.createElement("p",null,"system spec:")),l.createElement("div",{className:"vendor-textarea"},l.createElement("textarea",{className:"textarea-input",value:E,onChange:function(e){Z(e.target.value)}})),l.createElement("div",{className:"online-title"},l.createElement("p",null,"translate spec:")),l.createElement("p",null,"cue template"),l.createElement("div",{className:"vendor-preview"},l.createElement("pre",{className:"preview-pre",ref:a})),l.createElement("div",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){""!==S.trim()?(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/checkcue",data:{value:S},headers:{"Content-Type":"application/json"}}).then((function(e){o.Z.dispatch({type:p.Sn,val:0===e.data.code?"检查正确":e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})}))):o.Z.dispatch({type:p.Sn,val:"cue 不能为空"})}},"检查")))),l.createElement("section",{className:"online-btns"},l.createElement(i.Z,{className:"online-btn",variant:"contained",color:"primary",onClick:function(){var e;(""===v.trim()?(o.Z.dispatch({type:p.Sn,val:"metadata 不能为空"}),0):""===E.trim()?(o.Z.dispatch({type:p.Sn,val:"system spec 不能为空"}),0):""!==S.trim()||(o.Z.dispatch({type:p.Sn,val:"translate spec cue 不能为空"}),0))&&(o.Z.dispatch({type:p.br,val:!0}),r()({method:"POST",url:"/api/online/createvendor",data:{value:(e=/\n/g,v+"\nspec:\n  "+E.replace(e,"\n  ")+"\n  "+S.replace(e,"\n    "))},headers:{"Content-Type":"application/json"}}).then((function(e){o.Z.dispatch({type:p.Sn,val:e.data.result})})).catch((function(e){console.log(e),o.Z.dispatch({type:p.Sn,val:"请求错误"})})).finally((function(){o.Z.dispatch({type:p.br,val:!1})})))}},"保存")))}))}}]);